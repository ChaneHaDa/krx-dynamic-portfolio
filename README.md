# KRX Dynamic Portfolio

> ν•κµ­κ±°λμ†(KRX) λ°μ΄ν„°λ¥Ό ν™μ©ν• λ™μ  ν¬νΈν΄λ¦¬μ¤ μµμ ν™” λ° λ°±ν…μ¤ν… μ‹μ¤ν…

[![CI](https://github.com/your-username/krx-dynamic-portfolio/actions/workflows/ci.yml/badge.svg)](https://github.com/your-username/krx-dynamic-portfolio/actions/workflows/ci.yml)
[![Python 3.9+](https://img.shields.io/badge/python-3.9+-blue.svg)](https://www.python.org/downloads/)
[![Code style: black](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/psf/black)

## π€ λΉ λ¥Έ μ‹μ‘

```bash
# 1. μ €μ¥μ† ν΄λ΅ 
git clone https://github.com/your-username/krx-dynamic-portfolio.git
cd krx-dynamic-portfolio

# 2. κ°λ°ν™κ²½ μ„¤μ •
make dev

# 3. λ°μ΄ν„° μμ§‘ λ° μ „μ²λ¦¬
make etl

# 4. λ¨λΈ ν•™μµ
make train

# 5. λ°±ν…μ¤ν… μ‹¤ν–‰
make backtest

# 6. λ€μ‹λ³΄λ“ μ‹¤ν–‰
make app
```

## β΅ μ£Όμ” κΈ°λ¥

- **π“ KRX λ°μ΄ν„° μμ§‘**: FinanceDataReader, yfinanceλ¥Ό ν™μ©ν• μ‹¤μ‹κ°„ λ°μ΄ν„° μμ§‘
- **π§  ν¬νΈν΄λ¦¬μ¤ μµμ ν™”**: Modern Portfolio Theory κΈ°λ° λ™μ  λ¦¬λ°Έλ°μ‹±
- **π“ λ°±ν…μ¤ν…**: κ³Όκ±° λ°μ΄ν„°λ¥Ό ν™μ©ν• μ „λµ μ„±κ³Ό κ²€μ¦
- **π― λ€μ‹λ³΄λ“**: Streamlit κΈ°λ° μΈν„°λ™ν‹°λΈ μ‹κ°ν™”
- **π”§ μ™„μ „ μλ™ν™”**: ETL β†’ ν•™μµ β†’ λ°±ν…μ¤ν… β†’ λ°°ν¬ νμ΄ν”„λΌμΈ

## π› οΈ κ°λ° μ›ν¬ν”λ΅μ°

### μ£Όμ” λ…λ Ήμ–΄
```bash
make help      # λ¨λ“  λ…λ Ήμ–΄ λ³΄κΈ°
make dev       # κ°λ° μμ΅΄μ„± μ„¤μΉ + pre-commit μ„¤μ •
make lint      # μ½”λ“ μ¤νƒ€μΌ κ²€μ‚¬ (ruff + black + mypy)
make format    # μ½”λ“ μλ™ ν¬λ§·ν…
make test      # ν…μ¤νΈ μ‹¤ν–‰ (pytest + coverage)
make ci-test   # CIμ™€ λ™μΌν• κ²€μ‚¬ λ΅μ»¬ μ‹¤ν–‰
```

### λ°μ΄ν„° νμ΄ν”„λΌμΈ
```bash
make etl       # KRX λ°μ΄ν„° μμ§‘ λ° μ „μ²λ¦¬
make train     # ν¬νΈν΄λ¦¬μ¤ μµμ ν™” λ¨λΈ ν•™μµ
make backtest  # λ°±ν…μ¤ν… μ‹¤ν–‰
make app       # Streamlit λ€μ‹λ³΄λ“ μ‹¤ν–‰
```

## π“ ν”„λ΅μ νΈ κµ¬μ΅°

```
krx-dynamic-portfolio/
β”β”€β”€ pyproject.toml              # ν”„λ΅μ νΈ μ„¤μ • λ° μμ΅΄μ„±
β”β”€β”€ Makefile                    # κ°λ° μ›ν¬ν”λ΅μ° λ…λ Ήμ–΄
β”β”€β”€ .github/workflows/ci.yml    # GitHub Actions CI/CD
β”β”€β”€ krx_portfolio/
β”‚   β”β”€β”€ etl/                    # π“¥ λ°μ΄ν„° μμ§‘ λ° μ „μ²λ¦¬ (μ™„λ£)
β”‚   β”‚   β”β”€β”€ data_loader.py      # KRX JSON λ°μ΄ν„° λ΅λ”
β”‚   β”‚   β”β”€β”€ preprocessor.py     # λ°μ΄ν„° μ „μ²λ¦¬ λ° νΉμ„± μ—”μ§€λ‹μ–΄λ§  
β”‚   β”‚   β””β”€β”€ main.py            # ETL νμ΄ν”„λΌμΈ CLI
β”‚   β”β”€β”€ models/                 # π§  ν¬νΈν΄λ¦¬μ¤ μµμ ν™” λ¨λΈ (μ™„λ£)
β”‚   β”‚   β”β”€β”€ mpt.py             # Modern Portfolio Theory μµμ ν™”
β”‚   β”‚   β”β”€β”€ risk.py            # λ¦¬μ¤ν¬ λ¨λΈλ§ (Ledoit-Wolf, EWMA, OAS)
β”‚   β”‚   β”β”€β”€ rebalance.py       # λ™μ  λ¦¬λ°Έλ°μ‹± μ•κ³ λ¦¬μ¦
β”‚   β”‚   β””β”€β”€ pipeline.py        # ν†µν•© μµμ ν™” νμ΄ν”„λΌμΈ
β”‚   β”β”€β”€ backtesting/            # π“ λ°±ν…μ¤ν… μ—”μ§„ (μ™„λ£)
β”‚   β”‚   β”β”€β”€ engine.py          # ν¬νΈν΄λ¦¬μ¤ μ‹λ®¬λ μ΄μ… μ—”μ§„
β”‚   β”‚   β”β”€β”€ metrics.py         # 40+ μ„±κ³Ό μ§€ν‘ κ³„μ‚°
β”‚   β”‚   β”β”€β”€ risk_analytics.py  # VaR/CVaR/κ·Ήκ°’λ¶„μ„/μ¤νΈλ μ¤ν…μ¤ν…
β”‚   β”‚   β””β”€β”€ main.py            # End-to-end λ°±ν…μ¤ν… νμ΄ν”„λΌμΈ
β”‚   β””β”€β”€ app/                    # π¨ Streamlit λ€μ‹λ³΄λ“ (μμ •)
β”‚       β”β”€β”€ dashboard.py        # λ©”μΈ λ€μ‹λ³΄λ“
β”‚       β””β”€β”€ components/         # UI μ»΄ν¬λ„νΈ
β”β”€β”€ configs/                    # β™οΈ μ„¤μ • νμΌ
β”‚   β””β”€β”€ portfolio.yaml         # ν¬νΈν΄λ¦¬μ¤ μµμ ν™” μ„¤μ •
β”β”€β”€ docs/                       # π“– λ¬Έμ„ν™”
β”‚   β”β”€β”€ etl_api.md             # ETL API λ¬Έμ„
β”‚   β”β”€β”€ portfolio_api.md       # ν¬νΈν΄λ¦¬μ¤ API λ¬Έμ„
β”‚   β”β”€β”€ portfolio_optimization_guide.md  # μµμ ν™” κ°€μ΄λ“
β”‚   β””β”€β”€ backtesting_guide.md   # λ°±ν…μ¤ν… κ°€μ΄λ“
β””β”€β”€ tests/                      # π§ ν…μ¤νΈ (230+ ν…μ¤νΈ)
```

## π”§ κΈ°μ  μ¤νƒ

### λ°μ΄ν„° & λ¶„μ„
- **pandas**: λ°μ΄ν„° μ΅°μ‘ λ° λ¶„μ„
- **numpy**: μμΉ κ³„μ‚°
- **scikit-learn**: λ¨Έμ‹ λ¬λ‹ μ•κ³ λ¦¬μ¦

### λ°μ΄ν„° μ†μ¤
- **yfinance**: Yahoo Finance API
- **FinanceDataReader**: ν•κµ­ κΈμµ λ°μ΄ν„° (KRX, ν•κµ­μ€ν–‰ λ“±)

### μ‹κ°ν™” & λ€μ‹λ³΄λ“
- **streamlit**: μ›Ή λ€μ‹λ³΄λ“
- **plotly**: μΈν„°λ™ν‹°λΈ μ°¨νΈ

### κ°λ° λ„κµ¬
- **black**: μ½”λ“ ν¬λ§·ν…
- **ruff**: λΉ λ¥Έ λ¦°ν„°
- **mypy**: νƒ€μ… κ²€μ‚¬
- **pytest**: ν…μ¤νΈ ν”„λ μ„μ›ν¬
- **pre-commit**: Git ν›… κ΄€λ¦¬

## π§ ν…μ¤νΈ

```bash
# μ „μ²΄ ν…μ¤νΈ μ‹¤ν–‰
make test

# μ»¤λ²„λ¦¬μ§€ ν¬ν•¨ μƒμ„Έ ν…μ¤νΈ
pytest -v --cov=krx_portfolio --cov-report=html

# νΉμ • λ¨λ“ ν…μ¤νΈ
pytest tests/test_etl.py -v
```

## π“ ν…μ¤νΈ ν„ν™©

### ν„μ¬ κµ¬ν„ μ™„λ£
- β… **ETL νμ΄ν”„λΌμΈ**: 100% κµ¬ν„ λ° ν…μ¤νΈ μ™„λ£
- β… **λ°μ΄ν„° λ΅λ”**: 100% μ»¤λ²„λ¦¬μ§€ (`data_loader.py`)
- β… **μ „μ²λ¦¬κΈ°**: 100% μ»¤λ²„λ¦¬μ§€ (`preprocessor.py`)
- β… **ν†µν•© ν…μ¤νΈ**: ETL νμ΄ν”„λΌμΈ end-to-end ν…μ¤νΈ
- β… **μ½”λ“ ν’μ§**: Ruff/Black ν¬λ§·ν… μ™„λ£

### ν…μ¤νΈ ν†µκ³„
- **μ „μ²΄ ν…μ¤νΈ**: 230+ κ° (ETL 39κ° + ν¬νΈν΄λ¦¬μ¤ 83κ° + λ°±ν…μ¤ν… 110κ°)
- **μ „μ²΄ μ»¤λ²„λ¦¬μ§€**: 95%+ 
- **ν•µμ‹¬ λ¨λ“**: ETL, MPT, Risk Model, Rebalancer, Backtesting μ™„μ „ κµ¬ν„
- **ν…μ¤νΈ λ²”μ„**: λ‹¨μ„ ν…μ¤νΈ, ν†µν•© ν…μ¤νΈ, End-to-End ν…μ¤νΈ, μ„±κ³Ό κ²€μ¦
- **κµ¬ν„ μμ¤€**: ν•™μ μ—°κµ¬κΈ‰ β†’ μ‹¤λ¬΄κΈ‰ ν¬νΈν΄λ¦¬μ¤ μ‹μ¤ν…
- **μ΄ μ½”λ“λ‰**: 10,000+ μ¤„ (ν•µμ‹¬ λ¨λ“ + ν…μ¤νΈ + λ¬Έμ„)
- **κ°λ° ν™κ²½**: Python 3.9+, scipy, pandas, scikit-learn, pytest

## π¤ κΈ°μ—¬ν•κΈ°

1. μ΄μ μƒμ„± λλ” κΈ°μ΅΄ μ΄μ ν™•μΈ
2. feature λΈλμΉ μƒμ„±: `git checkout -b feature/amazing-feature`
3. λ³€κ²½μ‚¬ν•­ μ»¤λ°‹: `git commit -m 'Add amazing feature'`
4. λΈλμΉμ— ν‘Έμ‹: `git push origin feature/amazing-feature`
5. Pull Request μƒμ„±

### κ°λ° κ°€μ΄λ“λΌμΈ
- λ¨λ“  μ½”λ“λ” `make ci-test` ν†µκ³Ό ν•„μ
- μƒλ΅μ΄ κΈ°λ¥μ€ ν…μ¤νΈ μ½”λ“ ν¬ν•¨
- μ»¤λ°‹ λ©”μ‹μ§€λ” [Conventional Commits](https://conventionalcommits.org/) ν•μ‹ μ¤€μ

## π“ λ΅λ“λ§µ

### Phase 1: ETL νμ΄ν”„λΌμΈ (β… μ™„λ£)
- [x] KRX JSON λ°μ΄ν„° λ΅λ”
- [x] λ°μ΄ν„° μ „μ²λ¦¬ λ° μ •μ 
- [x] OHLCV ν¨λ„ λ°μ΄ν„° μƒμ„±
- [x] μμµλ¥  λ§¤νΈλ¦­μ¤ κ³„μ‚°
- [x] ν¬μ μ λ‹λ²„μ¤ κµ¬μ„±
- [x] μΊμ‹± μ‹μ¤ν…
- [x] ν…μ¤νΈ μ½”λ“ (95% μ»¤λ²„λ¦¬μ§€)
- [x] API λ¬Έμ„ν™”

### Phase 2: ν¬νΈν΄λ¦¬μ¤ μµμ ν™” λ¨λ“ (β… μ™„λ£)
- [x] **Modern Portfolio Theory (MPT)** - Max Sharpe, Min Variance, Mean-Variance μµμ ν™”
- [x] **λ¦¬μ¤ν¬ λ¨λΈλ§** - Ledoit-Wolf, EWMA, OAS, PSD λ³΄μ •, λ¦¬μ¤ν¬ λ²„μ§“ν…
- [x] **ν©ν„° λ¨λΈλ§** - ν©ν„° λ…Έμ¶λ„ λ¶„μ„ λ° νΉμ΄ λ¦¬μ¤ν¬ μ¶”μ •
- [x] **λ™μ  λ¦¬λ°Έλ°μ‹±** - μ¤μΌ€μ¤„/μ„κ³„μΉ κΈ°λ° κ±°λλΉ„μ© μµμ ν™”
- [x] **ν†µν•© νμ΄ν”„λΌμΈ** - End-to-end μµμ ν™” μ›ν¬ν”λ΅μ°
- [x] **μ μ•½ μ΅°κ±΄** - ν¬μ§€μ… μ ν•, μ„Ήν„° μΊ΅, νμ „μ¨ μμ‚°
- [x] **μ„¤μ • κ΄€λ¦¬** - YAML κΈ°λ° ν¬νΈν΄λ¦¬μ¤ κµ¬μ„±
- [x] **λ¬Έμ„ν™”** - ν¬νΈν΄λ¦¬μ¤ μµμ ν™” μ™„μ „ κ°€μ΄λ“

### Phase 3: λ°±ν…μ¤ν… λ¨λ“ (β… μ™„λ£)
- [x] **λ°±ν…μ¤ν… ν”„λ μ„μ›ν¬** - ν¬νΈν΄λ¦¬μ¤ μ‹λ®¬λ μ΄μ… μ—”μ§„ λ° μ„±κ³Ό ν‰κ°€
- [x] **μ„±κ³Ό μ§€ν‘ κ³„μ‚°** - 40+ μ§€ν‘ (Sharpe, Sortino, Calmar, MDD, λ“λ΅λ‹¤μ΄ λ“±)
- [x] **κ³ κΈ‰ λ¦¬μ¤ν¬ λ¶„μ„** - VaR/CVaR (λ‹¤μ¤‘ λ°©λ²•), κ·Ήκ°’μ΄λ΅ , μ¤νΈλ μ¤ ν…μ¤ν…
- [x] **κ±°λλΉ„μ© λ¨λΈλ§** - Linear/Square-root λ§μΌ“μ„ν©νΈ, λ¦¬λ°Έλ°μ‹± μµμ ν™”
- [x] **ν†µν•© νμ΄ν”„λΌμΈ** - End-to-end λ°±ν…μ¤ν… μ›ν¬ν”λ΅μ° λ° CLI
- [x] **ν¬κ΄„μ  ν…μ¤νΈ** - 110+ ν…μ¤νΈ μΌ€μ΄μ¤λ΅ μ™„μ „ κ²€μ¦
- [x] **μ™„μ „ν• λ¬Έμ„ν™”** - 400μ¤„ μ‹¤λ¬΄κΈ‰ λ°±ν…μ¤ν… κ°€μ΄λ“

### Phase 4: μ‚¬μ©μ μΈν„°νμ΄μ¤ (π“‹ μμ •) 
- [ ] **Streamlit λ€μ‹λ³΄λ“** - μΈν„°λ™ν‹°λΈ ν¬νΈν΄λ¦¬μ¤ μ‹κ°ν™”
- [ ] **μ‹¤μ‹κ°„ λ°μ΄ν„° μ—°λ™** - yfinance API ν†µν•©
- [ ] **μ•λ¦Ό μ‹μ¤ν…** - λ¦¬λ°Έλ°μ‹± μ‹ νΈ λ° λ¦¬μ¤ν¬ μ•λ¦Ό

### Phase 5: ν™•μ¥ κΈ°λ¥ (π“‹ μμ •)
- [ ] **λ¨Έμ‹ λ¬λ‹ κΈ°λ° μμΈ΅ λ¨λΈ** - LSTM, Transformer κΈ°λ° κ°€κ²© μμΈ΅
- [ ] **Docker μ»¨ν…μ΄λ„ν™”** - λ°°ν¬ ν™κ²½ ν‘μ¤€ν™”
- [ ] **ν΄λΌμ°λ“ λ°°ν¬** - AWS/GCP μλ™ν™” νμ΄ν”„λΌμΈ

## π“„ λΌμ΄μ„ μ¤

μ΄ ν”„λ΅μ νΈλ” MIT λΌμ΄μ„ μ¤ ν•μ— λ°°ν¬λ©λ‹λ‹¤. μμ„Έν• λ‚΄μ©μ€ [LICENSE](LICENSE) νμΌμ„ μ°Έμ΅°ν•μ„Έμ”.

---

**β οΈ ν¬μ μ£Όμμ‚¬ν•­**: λ³Έ μ‹μ¤ν…μ€ κµμ΅ λ° μ—°κµ¬ λ©μ μΌλ΅ μ μ‘λμ—μµλ‹λ‹¤. μ‹¤μ  ν¬μ κ²°μ •μ— μ‚¬μ©ν•κΈ° μ „ μ¶©λ¶„ν• κ²€μ¦μ΄ ν•„μ”ν•λ©°, ν¬μμ— λ”°λ¥Έ μ†μ‹¤μ€ μ „μ μΌλ΅ μ‚¬μ©μμ μ±…μ„μ…λ‹λ‹¤.